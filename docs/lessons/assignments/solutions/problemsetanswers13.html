<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Week 18 Problem Set Solutions &#8212; CoderGirl  documentation</title>
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/fa/css/all.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/launchcode.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Lesson 19: Advanced Queries" href="../../lesson19.html" />
    <link rel="prev" title="Week 18 Problem Set" href="../problemset13.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../index.html"><span><img src="../../../_static/lc-ed-logo.png" alt="LaunchCode logo"></span>
          CoderGirl SQL</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">Lessons <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ol class="current">
<li class="toctree-l1"><a class="reference internal" href="../../lesson01.html">Lesson 1: Ice breakers and database introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson02.html">Lesson 2: Writing SELECT Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson03.html">Lesson 3: Database Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson04.html">Lesson 4: Filtering and Ordering Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson05.html">Lesson 5: Introduction to SQL Server Reporting Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson06.html">Lesson 6: Using Parameters in Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson07.html">Lesson 7: Advanced Report Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson08.html">Lesson 8: Joining Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson09.html">Lesson 9: UNION and IN Subqueries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson10.html">Lesson 10: Scalar Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson11.html">Lesson 11: Aggregate Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson12.html">Lesson 12: Grouping in Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson13.html">Lesson 13: Deploying SSRS Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson14.html">Lesson 14: Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson15.html">Lesson 15: Creating Tables and Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson16.html">Lesson 16: Modifying Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson17.html">Lesson 17: Stored Procedures</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../lesson18.html">Lesson 18: Indexing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson19.html">Lesson 19: Advanced Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lesson20.html">Lesson 20: Using Report Builder and Report Parts</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../resources/sql_server_install.html">SQL Server Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources/connection_issues.html">Connection Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources/how_to_restore_a_database.html">How to Restore a Database</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="problemsetanswers02.html">Week 2 Problem Set Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="problemsetanswers03.html">Week 3 Problem Set Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="problemsetanswers04.html">Week 4 Problem Set Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="problemsetanswers05.html">Week 8 Problem Set Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="problemsetanswers06.html">Week 9 Problem Set Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="problemsetanswers07.html">Week 10 Problem Set Part 1 Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="problemsetanswers08.html">Week 10 Problem Set Part 2 Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="problemsetanswers09.html">Week 12 Problem Set Part 1 Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="problemsetanswers10.html">Week 12 Problem Set Part 2 Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="problemsetanswers11.html">Week 16 Problem Set Solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="problemsetanswers12.html">Week 17 Problem Set Solutions</a></li>
</ol>
<ol>
<li class="toctree-l1"><a class="reference internal" href="../../../about.html">About this Curriculum</a></li>
</ol>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
    <label for="q" class="searchLabel">Search</label>
    <input type="text" name="q" class="form-control" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Week 18 Problem Set Solutions</a></li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="week-18-problem-set-solutions">
<span id="week-18-problem-set-solutions"></span><h1>Week 18 Problem Set Solutions<a class="headerlink" href="#week-18-problem-set-solutions" title="Permalink to this headline">¶</a></h1>
<p>Use the AdventureWorks2014 database for these questions. There is not one right answer to these
problems. Here are suggested solutions.</p>
<ol>
<li><p class="first">Write a script that saves the count of rows in the SalesOrderHeader table in a variable. Then set up an <code class="docutils literal notranslate"><span class="pre">IF</span></code> block that prints “The count of sales is over 50,000” or “The count of sales is less than or equal to 50,000” based on the count.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> DECLARE @RowCount INT;
 SELECT @RowCount = COUNT(*)
 FROM Sales.SalesOrderHeader;
 IF @RowCount &gt; 50000 BEGIN
 PRINT &#39;The count of sales is over 50,000.&#39;;
 END
 ELSE BEGIN
 PRINT &#39;The count of sales is less than or equal to 50,000&#39;;
 END;
</pre></div>
</div>
</li>
<li><p class="first">Write a loop that runs 100 times. Print the current loop count. If the counter is divisible by 2(look up the modulo function %) then print “The value is even”. If it is odd, print “The value is odd.”</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> DECLARE @Count INT = 1;
 WHILE @Count &lt;= 100 BEGIN
 PRINT @Count
 IF @Count % 2 = 0 BEGIN
 PRINT &#39;The value is even.&#39;;
 END
 ELSE BEGIN
 PRINT &#39;The value is odd.&#39;;
 END
 SET @Count += 1;
 END;
</pre></div>
</div>
</li>
<li><p class="first">Write a script that contains nested <code class="docutils literal notranslate"><span class="pre">IF</span></code> blocks. The outer block should check to see whether the month is May or June. If it’s one of those months, then print “The month is “ plus the month. The inner block should check to see if the year is even. Print that information.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> IF DATENAME(month,GETDATE()) IN (&#39;June&#39;,&#39;May&#39;) BEGIN
 PRINT &#39;The month is &#39; + DATENAME(month,GETDATE());
 IF YEAR(GETDATE()) % 2 = 0 BEGIN
 PRINT &#39;The year is even&#39;;
 END
 ELSE BEGIN
 PRINT &#39;The year is odd&#39;;
 END
 END;
</pre></div>
</div>
</li>
<li><p class="first">Save the production.product table into a temp table. Set up a loop to delete one row at a time. Print the name of the product that is being deleted.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> SELECT *
 INTO #Products
 FROM Production.Product;
 DECLARE @ProductName NVARCHAR(50);
 WHILE EXISTS(SELECT * FROM #Products) BEGIN
 SELECT @ProductName = Name
 FROM #Products;
 PRINT @ProductName;
 DELETE FROM #Products
 WHERE Name = @ProductName;
 END;
</pre></div>
</div>
</li>
<li><p class="first">Create a table called WordToLetters that has an identity column called ID, an Integer column
called WordNumber and a CHAR(1) column called Letter. Create a stored procedure called
SplitWord that takes a parameter called &#64;Word varchar(50). This stored procedure should
enter one row in the table for each letter in the word. Be sure to review functions that can
help you write this proc. Here is an example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> Exec dbo.SplitWord @word = ‘apple’;
 SELECT * FROM WordToLetters;

 DROP TABLE IF EXISTS WordToLetter;
 GO
 CREATE TABLE WordToLetter (
 ID INT NOT NULL IDENTITY,
 WordNumber INT NOT NULL,
 Letter CHAR(1));
 GO
 DROP PROC IF EXISTS dbo.SplitWord;
 GO
 CREATE PROC dbo.SplitWord @Word VARCHAR(50) AS
 DECLARE @WordNumber INT;
 DECLARE @Count INT = 1;
 DECLARE @Letter CHAR(1);
 --Find the highest word number and add 1
 SELECT @WordNumber = MAX(WordNumber) FROM WordToLetter;
 SET @WordNumber = ISNULL(@WordNumber,0) + 1;
 --Use a loop to look at one letter at a time
 WHILE @Count &lt;= LEN(@Word) BEGIN
 SET @Letter = SUBSTRING(@Word,@Count,1);
 INSERT INTO WordToLetter(WordNumber,Letter)
 VALUES(@WordNumber, @Letter);
 SET @Count += 1;
 END;
 GO
 EXEC dbo.SplitWord @Word = &#39;apple&#39;;
 SELECT * FROM WordToLetter
 WHERE WordNumber = 1
 ORDER BY ID;
 EXEC dbo.SplitWord @Word = &#39;grapes&#39;;
 SELECT * FROM WordToLetter
 WHERE WordNumber = 2
 ORDER BY ID;
</pre></div>
</div>
</li>
</ol>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../../_sources/lessons/assignments/solutions/problemsetanswers13.md.txt"
     rel="nofollow">Page Source</a>
</div>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>